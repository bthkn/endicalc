<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Hello World!</title>
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/style.css">
    <script src="js/vue.min.js"></script>
</head>
<body>

  <div id="navBar" class="container-fluid px-0">
      <nav class="navbar fixed-top navbar-expand-lg navbar-dark bg-dark shadow-sm" style="padding: 0!important;">
          <div class="row w-100 mx-0">
          <div class="w-100 mx-0 app-titlebar">
              <div class="app-titlebar-button mnu">
              <button id="titlebar-btn-mnu">
                  <img src="../src/img/menu.svg" alt="*">
              </button>
              </div>
              <div class="app-titlebar-caption">
                  enDesign Calculator
              </div>
              <div class="app-titlebar-button min">
              <button id="titlebar-btn-min">
                  <img src="../src/img/minus.svg" alt="-">
              </button>
              </div>
              <div class="app-titlebar-button cls">
              <button id="titlebar-btn-cls">
                  <img src="../src/img/x.svg" alt="x">
              </button>
              </div>
          </div>
          </div>
      </nav>
  </div>
  
  <div id="app-fs" class="container-fluid px-0">
      
    <div id="files" class="row options mx-2 list-group-flush card flex-nowrap m-auto p-4 w-50">
      <h6>Сохраненные заказы</h6>
    </div>


    <script>document.write(`Node ${process.versions.node} | Chrome ${process.versions.chrome} | Electron  ${process.versions.electron}`)</script>
  </div>


    <script>
      const ordersPath = '/Users/user/Saved Games/orders/'
      var fs = require('fs')
      var fsfrm = new Vue({
        el: '#app-fs',
        data: {
          order: undefined
        },
        methods: {
          openFile(file) {
            fs.readFile(ordersPath+file, 'utf-8', (err, data) => {
              if (err) throw err
              console.log(data)
              this.order = JSON.parse(data)
            })
          }
        },
        beforeMount() {
          fs.readdir(ordersPath, (err, files) => {
            if (err) throw err

            console.log(files)
            
            var filesList = document.getElementById('files')

            for (f in files) {
              var fileName = files[f].replace('.json', '').replace('_', ' ')
              filesList.innerHTML += `<button type="button" class="list-group-item list-group-item-action" onclick="fsfrm.openFile('${files[f]}')">${fileName}</button>`
            }
              
          })
        }
      })
    </script>
</body>
</html>